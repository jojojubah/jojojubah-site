/* Jubah Labs â€” Matrix-friendly page with AI Assistant Integration */
/* Import complete site styles instead of basic style.css */
@import url("style.css");

/* Matrix canvas sits behind content */
.matrix-bg{ position:fixed; inset:0; width:100%; height:100svh; pointer-events:none; z-index:-2 }

/* Softer page backdrop when Matrix is present (both themes) */
body:has(#matrix-canvas) .background-gradient{
  background:
    radial-gradient(900px 600px at 20% 8%, rgba(255,255,255,0.04) 0%, transparent 60%),
    linear-gradient(145deg, var(--bg), var(--bg-2));
}

/* -------- Matrix tokens (theme-aware via CSS vars) -------- */
body:not([data-theme="dark"]):has(#matrix-canvas){
  --matrix-color:#3b82f6;     /* blue digits on light mode */
  --matrix-glow:rgba(0,0,0,0);/* no halo */
  --matrix-fade:rgba(255,255,255,0.08);
}
body[data-theme="dark"]:has(#matrix-canvas){
  --matrix-color:#00ff41;     /* classic green digits */
  --matrix-glow:rgba(0,255,65,0.06); /* tiny halo */
  --matrix-fade:rgba(0,0,0,0.08);     /* longer trails, same as light */
}

/* Enforce pure black underlay in dark mode: no green wash at all */
body[data-theme="dark"]:has(#matrix-canvas) .matrix-bg,
body[data-theme="dark"]:has(#matrix-canvas) .background-gradient{ background:#000 !important }

/* Matrix theme section titles */
body:has(#matrix-canvas) .section-title{
  background: linear-gradient(90deg, #22c55e, #86efac);
  -webkit-background-clip:text;background-clip:text;color:transparent;opacity:.95;
}

/* Matrix theme avatar styling */
body:has(#matrix-canvas) .site-avatar{ 
  border-color:rgba(255,255,255,.1); 
  box-shadow:6px 6px 14px rgba(0,0,0,.75), -6px -6px 14px rgba(255,255,255,.05) 
}

/* Matrix theme modal fixes */
body:has(#matrix-canvas) .learn-more-modal h3{ color:#fff }

/* Matrix toggle adopts the shared top-right styles */
#matrixToggle{ 
  all:unset; display:inline-block; padding:.5rem .75rem; border-radius:12px; 
  font-weight:600; cursor:pointer; background:var(--bg); color:var(--text); 
  box-shadow:var(--neu-out); transition:all .25s ease 
}
#matrixToggle:hover{ box-shadow:var(--neu-inset); color:var(--accent) }

/* Mobile size tweak */
@media (max-width:768px){
  #matrixToggle{ padding:.45rem .6rem; font-size:.9rem }
}

/* ======================== AI Assistant Matrix Theme Enhancements ======================== */

/* Matrix theme chat interface */
body[data-theme="dark"]:has(#matrix-canvas) .assistant-chat {
  border: 1px solid rgba(0, 255, 65, 0.2);
}

body[data-theme="dark"]:has(#matrix-canvas) .chat-header {
  background: linear-gradient(90deg, #22c55e, #16a34a);
}

body[data-theme="dark"]:has(#matrix-canvas) .user-message .message-content {
  background: linear-gradient(90deg, #22c55e, #16a34a);
}

/* Matrix theme avatar pulsing dot */
body[data-theme="dark"]:has(#matrix-canvas) .assistant-status-dot {
  background: #00ff41;
  animation: matrixPulse 2s infinite;
}

@keyframes matrixPulse {
  0% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0.7); }
  70% { box-shadow: 0 0 0 10px rgba(0, 255, 65, 0); }
  100% { box-shadow: 0 0 0 0 rgba(0, 255, 65, 0); }
}

/* Matrix theme send button */
body[data-theme="dark"]:has(#matrix-canvas) #chatSend {
  color: #00ff41;
}

body[data-theme="dark"]:has(#matrix-canvas) #chatSend:hover {
  color: #22c55e;
}

/* Matrix theme focus states */
body[data-theme="dark"]:has(#matrix-canvas) #chatInput:focus {
  box-shadow: var(--neu-inset), 0 0 0 2px #22c55e;
}

/* Matrix theme scrollbar */
body[data-theme="dark"]:has(#matrix-canvas) .chat-messages::-webkit-scrollbar-thumb {
  background: rgba(0, 255, 65, 0.3);
}

body[data-theme="dark"]:has(#matrix-canvas) .chat-messages::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 255, 65, 0.5);
}

/* Matrix theme typing dots */
body[data-theme="dark"]:has(#matrix-canvas) .typing-dot {
  background: #00ff41;
}

/* Enhanced Matrix theme buttons in Lab experiments */
body[data-theme="dark"]:has(#matrix-canvas) .btn:hover {
  color: #00ff41 !important;
  box-shadow: var(--neu-inset), 0 0 8px rgba(0, 255, 65, 0.2);
}

/* Matrix theme project cards glow effect */
body[data-theme="dark"]:has(#matrix-canvas) .project-card:hover {
  box-shadow: var(--neu-out), 0 0 20px rgba(0, 255, 65, 0.1);
}

/* ======================== Original Assistant Bubble Compatibility ======================== */

/* Keep original assistant bubble styling for tips */
.assistant-bubble{
  position: absolute; right: calc(100% + 12px); bottom: 6px;
  max-width: min(320px, 80vw);
  background: var(--bg); color: var(--text);
  border-radius: 14px; padding: 12px 14px;
  box-shadow: var(--neu-out);
  border: 1px solid rgba(0,0,0,.06);
  display: none;
}

.assistant-bubble.show{ 
  display: block; 
  animation: popIn .15s ease-out; 
}

@keyframes popIn{ 
  from{ opacity:0; transform:scale(.9); } 
  to{ opacity:1; transform:scale(1); } 
}

.assistant-close{
  position: absolute; right: 6px; top: 6px; background: none; border: 0;
  font-size: 18px; line-height: 1; color: var(--text-dim); cursor: pointer;
}

.assistant-actions{ 
  display: flex; gap: 8px; margin-top: .5rem; 
}

.assistant-btn{
  padding: .4rem .8rem; border-radius: 10px; border: 0;
  background: var(--bg); box-shadow: var(--neu-out);
  font-weight: 600; cursor: pointer;
}

.assistant-btn:hover{ 
  box-shadow: var(--neu-inset); 
}

/* Matrix theme assistant bubble */
body[data-theme="dark"]:has(#matrix-canvas) .assistant-bubble{ 
  background: var(--bg); 
  color: var(--text);
  border: 1px solid rgba(0, 255, 65, 0.2);
}

body[data-theme="dark"]:has(#matrix-canvas) #assistantClose{
  color: #00ff41;
}

body[data-theme="dark"]:has(#matrix-canvas) #assistantClose:hover{
  color: #22c55e;
}

/* ======================== Matrix Theme Lab Cards Special Effects ======================== */

/* Add subtle matrix glow to lab experiment cards */
body[data-theme="dark"]:has(#matrix-canvas) .project-card {
  position: relative;
  overflow: hidden;
}

body[data-theme="dark"]:has(#matrix-canvas) .project-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.03), transparent);
  transition: left 0.5s ease;
  pointer-events: none;
}

body[data-theme="dark"]:has(#matrix-canvas) .project-card:hover::before {
  left: 100%;
}

/* Matrix theme navigation adjustments */
body[data-theme="dark"]:has(#matrix-canvas) .nav-link:hover,
body[data-theme="dark"]:has(#matrix-canvas) .nav-link.active {
  color: #00ff41 !important;
}

/* Matrix theme footer links */
body[data-theme="dark"]:has(#matrix-canvas) .footer-links a:hover {
  color: #00ff41 !important;
}

/* ======================== Responsive Matrix Enhancements ======================== */

@media (max-width: 640px) {
  /* Matrix theme mobile adjustments */
  body[data-theme="dark"]:has(#matrix-canvas) .assistant-chat {
    border: 1px solid rgba(0, 255, 65, 0.15);
  }
  
  /* Ensure matrix effects don't overwhelm mobile UI */
  body[data-theme="dark"]:has(#matrix-canvas) .project-card:hover {
    box-shadow: var(--neu-out), 0 0 10px rgba(0, 255, 65, 0.05);
  }
}